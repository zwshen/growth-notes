
<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Langton's Ant</TITLE>
<META NAME="description" CONTENT="Langton's Ant">
<META NAME="keywords" CONTENT="htmlatex">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="htmlatex.css">

</HEAD>

<BODY LANG="EN" BGCOLOR=#FFFFFF>

<H1><BR CLEAR=ALL><CENTER><TABLE BGCOLOR=#0000ff><TR><TD><B><FONT SIZE=5 COLOR=#FFff00>&nbsp;<A NAME="SECTION0001000000000000000000">
Langton's Ant</A>&nbsp;</FONT></B></TABLE></CENTER>
</H1>
<EM>Langton's ant</EM>, after the mathematician Christopher Langton, is a cellular automaton with a very simple set of rules but interesting emergent behavior; this behavior is currently the matter of research for some mathematicians. The analogy between ants and Langton's cellular automaton comes from the observation that one can arbitrarily identify the state of the automaton as the ``ant'', and the dynamics of the automaton with the ability of the ant to travel in a special world.

<P>
The ant world's is an <!-- MATH
 $n \times n$
 -->
<SPAN CLASS="MATH"><I>n</I> <TT>x</TT> <I>n</I></SPAN> plane where the squares (or cells) on the plane are colored variously either blue or red. The number <SPAN CLASS="MATH"><I>n</I></SPAN> is called the <SPAN  CLASS="textit">size</SPAN> of the world. A cell is denoted with a pair <SPAN CLASS="MATH">(<I>i</I>, <I>j</I>)</SPAN>, (<!-- MATH
 $1 \le i,j \le n$
 -->
<SPAN CLASS="MATH">1<IMG
 WIDTH="18" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="11664img1.png"
 ALT="$ \le$"><I>i</I>, <I>j</I><IMG
 WIDTH="18" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="11664img1.png"
 ALT="$ \le$"><I>n</I></SPAN>). The ant lives and moves in single steps following the rules below:

<P>

<UL>
<LI>if it is on a blue cell, it flips the color of the cell, turns <!-- MATH
 $\frac{\pi}{2}$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="17" HEIGHT="33" ALIGN="MIDDLE" BORDER="0"
 SRC="11664img2.png"
 ALT="$ {\frac{{\pi}}{{2}}}$"></SPAN> to the left, and moves forward to the next cell in the direction it is facing;
</LI>
<LI>if it is on a red cell, it flips the color of the cell, turns <!-- MATH
 $\frac{\pi}{2}$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="17" HEIGHT="33" ALIGN="MIDDLE" BORDER="0"
 SRC="11664img2.png"
 ALT="$ {\frac{{\pi}}{{2}}}$"></SPAN> to the right, and moves forward to the next cell in the direction it is facing; and
</LI>
<LI>if a movement is impossible (because the ant cannot move out of the world), then the ant dies.
</LI>
</UL>

<P>
For example, let us assume the ant is in a red cell while facing east. If there is not a cell immediately to its south, then the ant dies. On the contrary, if there is a cell immediately to its south, then the ant takes a single step by moving to this cell to which it arrives facing south and the color of its source cell flips to blue. Then, the ant will try to take another single step, and so on.

<P>
Your task is to determine if the ant can go to the <SPAN CLASS="MATH">(<I>n</I>, <I>n</I>)</SPAN> cell of a world, given (i) the configuration of the world, and (ii) the initial position of the ant. You are to assume the ant's initial direction is north.

<P>

<H2><FONT size=4 COLOR=#ff0000><A NAME="SECTION0001001000000000000000">
Input</A>&nbsp;</FONT>
</H2>

<P>
The configuration of an <!-- MATH
 $n \times n$
 -->
<SPAN CLASS="MATH"><I>n</I> <TT>x</TT> <I>n</I></SPAN> world can be codified as a natural number in binary notation by using <SPAN CLASS="MATH"><I>n</I><SUP>2</SUP></SPAN> bits. We adopt the following conventions: <!-- MATH
 $0 = \mathrm{blue}$
 -->
<SPAN CLASS="MATH">0 = blue</SPAN>, <!-- MATH
 $1 = \mathrm{red}$
 -->
<SPAN CLASS="MATH">1 = red</SPAN>, and the binary representation of the configuration identifies the cells of the world from left to right and from bottom to top (considering the bits from the most significant bit to the least significant bit). For example, the binary number <SPAN CLASS="MATH">0100</SPAN> (<SPAN CLASS="MATH">4</SPAN> in decimal notation) represents a <!-- MATH
 $2 \times 2$
 -->
<SPAN CLASS="MATH">2 <TT>x</TT> 2</SPAN> world with the following configuration: 

<P>
<DIV ALIGN="CENTER">
<TABLE COLS=2 BORDER FRAME=BOX RULES=GROUPS>
<COLGROUP><COL ALIGN=CENTER><COLGROUP><COL ALIGN=CENTER>
<TBODY>
<TR><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP>
    blue </TD><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP> blue </TD></TR>
</TBODY><TBODY>
<TR><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP>blue </TD><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP> red </TD></TR>
</TBODY>
</TABLE>

</DIV>

<P>
Coherently, the binary number <SPAN CLASS="MATH">011010100</SPAN> (<SPAN CLASS="MATH">212</SPAN> in decimal notation) represents a <!-- MATH
 $3 \times 3$
 -->
<SPAN CLASS="MATH">3 <TT>x</TT> 3</SPAN> world with the following configuration:

<P>
<DIV ALIGN="CENTER">
<TABLE COLS=3 BORDER FRAME=BOX RULES=GROUPS>
<COLGROUP><COL ALIGN=CENTER><COLGROUP><COL ALIGN=CENTER><COLGROUP><COL ALIGN=CENTER>
<TBODY>
<TR><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP>
    red </TD><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP> blue </TD><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP> blue </TD></TR>
</TBODY><TBODY>
<TR><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP>blue </TD><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP> red </TD><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP> blue </TD></TR>
</TBODY><TBODY>
<TR><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP>blue </TD><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP> red </TD><TD VALIGN=BASELINE ALIGN=CENTER NOWRAP> red </TD></TR>
</TBODY>
</TABLE>

</DIV>

<P>
The problem input has several test cases. Each case consists of a single line containing a list of four natural numbers, <SPAN CLASS="MATH"><I>n</I>, <I>c</I>, <I>x</I>, <I>y</I></SPAN>, separated by blanks, that should be interpreted as:

<UL>
<LI><SPAN CLASS="MATH"><I>n</I></SPAN> (<!-- MATH
 $1 \leq n \leq 16$
 -->
<SPAN CLASS="MATH">1 <IMG
 WIDTH="18" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="11664img3.png"
 ALT="$ \leq$"> <I>n</I> <IMG
 WIDTH="18" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="11664img3.png"
 ALT="$ \leq$"> 16</SPAN>): the size of the world;
</LI>
<LI><SPAN CLASS="MATH"><I>c</I></SPAN> (<!-- MATH
 $0 \leq c < 2^{(n^2)}$
 -->
<SPAN CLASS="MATH">0 <IMG
 WIDTH="18" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="11664img3.png"
 ALT="$ \leq$"> <I>c</I> &lt; 2<SUP>(n<SUP>2</SUP>)</SUP></SPAN>): decimal representation of an <SPAN CLASS="MATH"><I>n</I><SUP>2</SUP></SPAN>-bit binary number that describes an initial configuration of the world, as above explained;
</LI>
<LI><SPAN CLASS="MATH">(<I>x</I>, <I>y</I>)</SPAN>: coordinates of the initial position of the ant in the world (<!-- MATH
 $1 \leq x,y \leq n$
 -->
<SPAN CLASS="MATH">1 <IMG
 WIDTH="18" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="11664img3.png"
 ALT="$ \leq$"> <I>x</I>, <I>y</I> <IMG
 WIDTH="18" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="11664img3.png"
 ALT="$ \leq$"> <I>n</I></SPAN>), where the position <SPAN CLASS="MATH">(<I>n</I>, <I>n</I>)</SPAN> corresponds to the least significant bit of <SPAN CLASS="MATH"><I>c</I></SPAN>.
</LI>
</UL>

<P>
The end of the input is indicated by a line where <!-- MATH
 $n = c = x = y = 0$
 -->
<SPAN CLASS="MATH"><I>n</I> = <I>c</I> = <I>x</I> = <I>y</I> = 0</SPAN>.

<P>

<H2><FONT size=4 COLOR=#ff0000><A NAME="SECTION0001002000000000000000">
Output</A>&nbsp;</FONT>
</H2>

<P>
For each test case your solution should output:

<P>

<UL>
<LI>`<TT>Yes</TT>' if the ant reaches the cell <SPAN CLASS="MATH">(<I>n</I>, <I>n</I>)</SPAN> from the initial position;
</LI>
<LI>`<TT>Kaputt!</TT>' if the ant dies without reaching the cell <SPAN CLASS="MATH">(<I>n</I>, <I>n</I>)</SPAN> from the initial position.
</LI>
</UL>

<P>
For each test case, it's guaranteed that after a finite number of steps, the ant reaches the cell <SPAN CLASS="MATH">(<I>n</I>, <I>n</I>)</SPAN> or dies without reaching the cell <SPAN CLASS="MATH">(<I>n</I>, <I>n</I>)</SPAN>.

<P>

<H2><FONT size=4 COLOR=#ff0000><A NAME="SECTION0001003000000000000000">
Sample Input</A>&nbsp;</FONT>
</H2>
<PRE>
2 8 1 1
2 4 1 1
2 15 1 1
0 0 0 0
</PRE>

<P>

<H2><FONT size=4 COLOR=#ff0000><A NAME="SECTION0001004000000000000000">
Sample Output</A>&nbsp;</FONT>
</H2>
<PRE>
Yes
Kaputt!
Kaputt!
</PRE>

<P>


<P>
<BR><HR>

</BODY>
</HTML>
</HTML>
