<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>


	<title>Problem E: Grid Successors</title>
	<meta name="author" content="Zachary Friggstad">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head><body>

<h2>Problem E: Grid Successors</h2>

<font color="white"><img src="p11581.png" alt="Not a grid of numbers" width="200" align="right" border="5"></font>
<p>Consider a 3 x 3 grid of numbers <em>g</em> where each cell contains either a 0 or a 1.
We define a function <em>f</em> that transforms such a grid: each cell of the
grid <em>f(g)</em> is the sum (modulo 2) of its adjacent cells in <em>g</em>
(two cells are considered adjacent if and only if they share a common side).

</p><p>Furthermore, we define <em>f&nbsp;<sup>(i)</sup>(g)</em> recursively
as <em>f&nbsp;<sup>(0)</sup>(g) = g</em> and
<em>f&nbsp;<sup>(i+1)</sup>(g) &nbsp;=&nbsp; f(f&nbsp;<sup>(i)</sup>(g))</em>
(where <em>i &nbsp;≥&nbsp; 0</em>).
Finally, for any grid <em>h</em>, let <em>k<sub>g</sub>(h)</em> be the number of
indices <em>i</em> such that <em>h = f&nbsp;<sup>(i)</sup>(g)</em> 
(we may have <em>k<sub>g</sub>(h) = ∞</em>).
Given a grid <em>g</em>, your task is to compute the greatest index <em>i</em>
such that <em>k<sub>g</sub>(f&nbsp;<sup>(i)</sup>(g))</em> is finite.

</p><p>Input begins with the number of test cases on its own line.
Each case consists of a blank line followed by three lines of three characters, each either <code>1</code> or <code>0</code>.
The <em>j</em>'th character
of the <em>i</em>'th row of the test case is the value in the <em>j</em>'th cell
of the <em>i</em>'th row of the grid <em>g</em>.

</p><p>For each test case, output the greatest index <em>i</em> such that
<em>k<sub>g</sub>(f&nbsp;<sup>(i)</sup>(g))</em> is finite.
If there is no such index, output -1.

</p><h3>Sample input</h3>
<pre>3

111
100
001

101
000
101

000
000
000
</pre>

<h3>Sample output</h3>
<pre>3
0
-1
</pre>

<hr>
<em>Babak Behsaz and Zachary Friggstad</em>

</body></html>
