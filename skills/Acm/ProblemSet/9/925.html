<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
	<head>
		<title>MIUP'2004-Problem F</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<meta name="ProgId" content="Word.Document">
		<meta name="Originator" content="Microsoft Word 9">
		<meta name="GENERATOR" content="Microsoft FrontPage 2.0">
		<link rel="File-List" href="./F-Prerequisites_files/filelist.xml">
			<link rel="Edit-Time-Data" href="./F-Prerequisites_files/editdata.mso"> <!--[if !mso]>
<STYLE>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</STYLE>
<![endif]-->  <!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Isabel Nunes</o:Author>
  <o:LastAuthor>Pedro Guerreiro</o:LastAuthor>
  <o:Revision>5</o:Revision>
  <o:TotalTime>7</o:TotalTime>
  <o:Created>2004-10-09T14:36:00Z</o:Created>
  <o:LastSaved>2004-10-09T14:38:00Z</o:LastSaved>
  <o:Pages>2</o:Pages>
  <o:Words>463</o:Words>
  <o:Characters>2643</o:Characters>
  <o:Lines>22</o:Lines>
  <o:Paragraphs>5</o:Paragraphs>
  <o:CharactersWithSpaces>3245</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]-->
				<style> <!-- /* Style Definitions */ p.MsoNormal, li.MsoNormal, div.MsoNormal {mso-style-parent:""; margin:0mm; margin-bottom:.0001pt; mso-pagination:widow-orphan; font-size:12.0pt; font-family:"Times New Roman"; mso-fareast-font-family:"Times New Roman";}
	p {margin-right:0mm; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; margin-left:0mm; mso-pagination:widow-orphan; font-size:12.0pt; font-family:"Times New Roman"; mso-fareast-font-family:"Times New Roman";}
	pre {margin:0mm; margin-bottom:.0001pt; mso-pagination:widow-orphan; tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; font-size:10.0pt; font-family:"Courier New"; mso-fareast-font-family:"Courier New";}
	@page Section1 {size:612.0pt 792.0pt; margin:70.85pt 30.0mm 70.85pt 30.0mm; mso-header-margin:35.4pt; mso-footer-margin:35.4pt; mso-paper-source:0;}
	div.Section1 {page:Section1;}
	--></style>
		<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1027"/>
</xml><![endif]-->  <!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
	</head>
	<body bgcolor="#ffffff" lang="EN-GB" style="tab-interval:36.0pt">
		<h1><span style="COLOR:#006000">Problem F</span></h1>
		<h1 align="center" style="TEXT-ALIGN:center"><span style="COLOR:#006000">No more
prerequisites, please!</span></h1>
		<p>Recently, I had to prepare a small students guide concerning our Computer 
			Science graduation. I asked all my colleagues to send me some specific pieces 
			of information about the courses they were responsible for. One of these pieces 
			of information was the set of prerequisites that is defined for each course <em>c</em>, 
			that is, the set of courses that the student is supposed to have completed 
			before he can attend course <em>c</em>.</p>
		<p>Some of my colleagues were so zealous of their task that they sent me more 
			information than I needed... I'll explain:</p>
		<p style="MARGIN-LEFT:36pt;MARGIN-RIGHT:36pt">Let <em>ca</em>, <em>cb</em>, <em>cc</em>,
			<em>cd</em> and <em>ce</em> be courses of our Computer Science graduation.<br>
			Suppose <em>ca</em> is a prerequisite for <em>cb</em>; <em>cb</em> and <em>cc</em>
			are prerequisites for <em>cd</em>; <em>cd</em> is a prerequisite for <em>ce</em>.<br>
			John, who is responsible for course <em>cd</em>, told me that the prerequisites 
			for <em>cd</em> were <em>cc</em>, <em>cb</em> and <em>ca</em>;<br>
			Elizabeth, who is responsible for course <em>ce</em>, told me that the 
			prerequisites for <em>ce</em> were <em>cd</em>, <em>cc</em>, <em>cb</em> and <em>ca</em>.</p>
		<p>But I only needed prerequisites <em>cc</em> and <em>cb</em> for course <em>cd</em>
			because <em>cb</em> already has <em>ca</em> as its prerequisite! Likewise, I 
			only needed prerequisite <em>cd</em> for course <em>ce</em> because <em>cd</em> 
			already has <em>cc</em>, <em>cb</em>, and <em>ca</em> as its prerequisites!
		</p>
		<p>Unfortunately, not all my colleagues asked me whether I wanted the whole set of 
			prerequisites or the minimum one; they asked John instead!! He told them that 
			"the most information, the better"!
		</p>
		<p>I had no courage to tell them that, by sending me more information than the one 
			I needed, they were turning my task of gathering all their info more difficult. 
			How I wished for some robot that I could feed with the information I had, and 
			that gave me, for each course, the minimum set of prerequisites!
		</p>
		<p>Never too late...</p>
		<h2><span style="COLOR:#006000">Problem</span></h2>
		<p>Your task consists of writing a program that, given the name and prerequisites 
			of a set of courses, computes the minimum set of prerequisites for all courses.</p>
		<h2><span style="COLOR:#006000">Input</span></h2>
		<p>The first line contains the number <em>C</em> of test cases that follow ( 0 &lt; <em>
				C &lt; 1000 ). </em>
		</p>
		<p>Each test case starts with a line containing the number <i>k</i> (0 &lt; <em>k </em>
			&lt;= 120) of courses that are to be processed. The next <em>k</em> lines 
			contain the names of the <em>k</em> courses, one per line. The next line 
			contains the number <em>j</em> of courses that have prerequisites (0 &lt;= <em>j</em>
			&lt;= 120). The next <i>j</i> lines contain, for each course that has some 
			prerequisite, the course name, the number of prerequisites it has, and the 
			names of the courses that are its prerequisites, separated by a single space.</p>
		<p>Course names have maximum length 20, do not contain any spaces, and are composed 
			of characters in the set {'a'..'z'}.</p>
		<p>There are no cycles on prerequisites, that is, it is never the case that some 
			course <em>c</em> has a prerequisite course <em>cp</em> that has <em>c</em> as 
			a prerequisite (directly or indirectly).</p>
		<h2><span style="COLOR:#006000">Output</span></h2>
		<p>For each input case your program must output the information about the courses 
			that have prerequisites. Each line must contain the name of the course, the 
			number of prerequisites it has, and the names of the courses that are its 
			prerequisites, separated by a single space.</p>
		<p style="MARGIN-BOTTOM:12pt">Within each test case, the courses must be listed 
			ordered by name, and the list of prerequisites for each course must also be 
			ordered by course name.
		</p>
		<h2><span style="COLOR:#006000">Sample Input </span></h2>
		<pre>2</pre>
		<pre>5</pre>
		<pre>cc</pre>
		<pre>ca</pre>
		<pre>ce</pre>
		<pre>cb</pre>
		<pre>cd</pre>
		<pre>3</pre>
		<pre>ce 4 cd cb cc ca</pre>
		<pre>cd 3 cb cc ca</pre>
		<pre>cb 1 ca</pre>
		<pre>9</pre>
		<pre>dg</pre>
		<pre>di</pre>
		<pre>dc</pre>
		<pre>df</pre>
		<pre>de</pre>
		<pre>dd</pre>
		<pre>da</pre>
		<pre>dh</pre>
		<pre>db</pre>
		<pre>7</pre>
		<pre>dg 3 da de df</pre>
		<pre>dd 2 da db</pre>
		<pre>df 1 de</pre>
		<pre>dc 1 db</pre>
		<pre>dh 5 da de dg df dc</pre>
		<pre>de 2 da dd</pre>
		<pre>di 2 df dd</pre>
		<h2><span style="COLOR:#006000">Sample Output </span></h2>
		<pre>cb 1 ca</pre>
		<pre>cd 2 cb cc</pre>
		<pre>ce 1 cd</pre>
		<pre>dc 1 db</pre>
		<pre>dd 2 da db</pre>
		<pre>de 1 dd</pre>
		<pre>df 1 de</pre>
		<pre>dg 1 df</pre>
		<pre>dh 2 dc dg</pre>
		<pre>di 1 df</pre>
		<span style="COLOR:black">
			<hr>
		</span>
		<p align="center" class="MsoNormal" style="TEXT-ALIGN:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt"><span style="FONT-SIZE:13.5pt;COLOR:black">MIUP'2004:
Fourth Portuguese National Programming Contest <o:p></o:p></span></p>
		<span style="COLOR:black">
			<hr>
			<P align="left">
		</span>Problem setter: Isabel Nunes<o:p></o:p></P>
	</body>
</html>
