<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>

<HEAD>
<TITLE>UP ACM Programming Contest (2003) / Round 2: Problem D</title>
</head>

<BODY bgcolor="white">

<p>&nbsp;

<font color="#0000FF">
<H1>Problem D</h1>

<H1 align="center">Checking the N-Queens Problem</h1>
</font>

<P align="justify">

The <i>eight-queens</i> problem consists of finding (if it exists) a
configuration for a set of eight queens on a chessboard, in such a way
that no queen is under attack by any other. In other words, there must
be a single queen in each row and column of the board, and at most one
queen in each diagonal line.  The <i>N-queens</i> problem is the
obvious generalization of this problem to an <i>NxN</i>
board. Consider for instance the following two configurations; the
first is a solution to the <em>5-queens</em> problem and the second is
not:</p>

<p> </p>

<table width="59%" border="0" align="center">
    <tr> 
      <td><table width="110" height="85" border=1 bordercolor=black align="center" cellpadding=0 cellspacing=0>
          <tr> 
            <td width=20 valign=top class="Normal">&nbsp;</td>
            <td width=20 valign=top class="Normal">&nbsp;</td>
            <td width=20 valign=top class="Normal"> <div align="center">Q </div></td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
          </tr>
          <tr> 
            <td width=20 valign=top class="Normal"> <div align="center">Q </div></td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
          </tr>
          <tr> 
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal"> <div align="center">Q </div></td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
          </tr>
          <tr> 
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal"> <div align="center">Q </div></td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp; </td>
          </tr>
          <tr> 
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal"> <div align="center">Q </div></td>
          </tr>
        </table></td>
      <td><table width="110" height="85" border=1 bordercolor=black align="center" cellpadding=0 cellspacing=0>
          <tr> 
            <td width=20 valign=top class="Normal"> &nbsp; </td>
            <td width=20 valign=top class="Normal"><div align="center">Q </div></td>
            <td width=20 valign=top class="Normal"> &nbsp; </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
          </tr>
          <tr> 
            <td width=20 valign=top class="Normal"> <div align="center">Q </div></td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
          </tr>
          <tr> 
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal"> <div align="center">Q </div></td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
          </tr>
          <tr> 
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal"> <div align="center">Q </div></td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
          </tr>
          <tr> 
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal">&nbsp;  </td>
            <td width=20 valign=top class="Normal"> <div align="center">Q </div></td>
          </tr>
        </table></td>
    </tr>
  </table>

<FONT color="#0000FF"><H2>Problem</h2></font>

<P align="justify"> 

Your task is to write a program that, for a given <em>N</em>,
determines whether a configuration is a solution to the
<em>N-queens</em> problem. If not, the program will then check if a
solution can be obtained by moving a single queen (in any of the eight
possible directions). To simplify, consider that queens can move over
each other, i.e, a queen can be moved to any <em>empty</em> position
in the same row, column, or diagonal line where it stands.


<FONT color="#0000FF"><H2>Input</h2></font>

<P align="justify"> 
The input consists of several test cases, each of which has:
</div>
<ul>
<li> a line containing the dimension <em>N</em> of the problem
   (a positive integer number not greater than 30), followed by  </li>
<li> <em>N</em> lines, each consisting of <em>N</em> characters followed by newline. Characters can only be <tt>0</tt> (zero,
      corresponding to an  empty position) or (capital) <tt>X</tt>,
      corresponding to a queen. Each line corresponds to a row in the
      board. </li>
</ul>

The input will contain exactly <em>N</em> occurrences of the character
<tt>X</tt>. 

<FONT color="#0000FF"><H2>Output</h2></font>

<P align="justify"> 

The output for each test case will consist of one of the following:

<ul>
<li> a single line containing the word <tt>YES</tt> (if the configuration 
      is a solution to the <em>N-queens</em> problem) </li>
<li> otherwise, a line containing the word <tt>NO</tt>, followed by 
      a line containing either:
  <ul>
  <li> the word <tt>NO</tt>, if no solution can be obtained by moving 
       one queen; or </li>
  <li> the word <tt>YES</tt> followed by <em>N</em> lines corresponding to
        the description of the solution discovered, in the same format
        as in the input. </li>
  </ul>
  </li>
</ul>
Print a blank line between test cases.

<FONT color="#0000FF"><H2>Sample Input</h2></font>

<pre>
5
00X00
X0000
000X0
0X000
0000X
5
0X000
X0000
000X0
0X000
0000X
</pre>

<FONT color="#0000FF"><H2>Sample Output</h2></font>

<pre>
YES

NO
YES
00X00
X0000
000X0
0X000
0000X
</pre>

<BR><HR>
<ADDRESS>
University of Porto / 2003 ACM Programming Contest / Round 2 / 2003/09/24
</address>

<p>&nbsp;

</body>
</html>
