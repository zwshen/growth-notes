<html>
<h2>Problem B: Moveable maze</h2>

After solving a difficult programming problem, you decide to take a
break and play a puzzle game. After playing the game for a while,
you decide to write a program to solve it for you.
<p>
The game is played on a grid with
<i>R</i> rows and <i>C</i> columns. Each square of the grid contains
a black dot in the centre and black lines in the direction of some,
none, or all of its north, east, south, and west neighbouring squares.
Your objective in this game is to move your playing piece from the centre of the
square in
the <i>i<sub>1</sub></i><sup>th</sup> row and the <i>j<sub>1</sub></i><sup>th</sup>
column, where it begins, to the centre of the square in the
the <i>i<sub>2</sub></i><sup>th</sup> row and the <i>j<sub>2</sub></i><sup>th</sup>
column.
<p>
You wish to do this in the least number of turns possible, where
a turn consists of the following two parts. First in each turn, you may opt to select any
grid square and rotate it 90 degrees clockwise or counterclockwise.
Second in each turn, you may opt to move your piece from the centre of its current grid
square to the centre of a neighbouring grid square, provided your piece does not leave
the black markings. In other words, you may move from a square A to
a neighbouring square B if A has a black line in the direction of B and
B has a black line in the direction of A. Note that either part of a turn
may be omitted.

<h3>Input Specification</h3>
Input consists of a number of test cases.
The first line of each test case contains the two integers <i>R</i> and <i>C</i>,
separated by spaces, with 1 &lt;= <i>R</i>, <i>C</i> &lt;= 20.
<p>
The next line contains the integers
<i>i<sub>1</sub></i>,
<i>j<sub>1</sub></i>,
<i>i<sub>2</sub></i>,
<i>j<sub>2</sub></i>,
separated by spaces, with
1 &lt;= <i>i<sub>1</sub></i>, <i>i<sub>2</sub></i> &lt;= <i>R</i>
and
1 &lt;= <i>j<sub>1</sub></i>, <i>j<sub>2</sub></i> &lt;= <i>C</i>.
<p>
The following <i>R</i> lines of input each contain one row of the grid,
from north to south.
Each of these lines contains exactly <i>C</i> strings of letters,
separated by spaces, that correspond to squares of the grid,
from west to east. Their format
is as follows:
<ul>
<li>If the string is the single character <tt>x</tt>, then the
square does not contain a line to any of its neighbours.
<li>Otherwise, the
string contains some of the characters <tt>N</tt>, <tt>E</tt>, <tt>S</tt>,
<tt>W</tt>, which indicate that a black line extends from this square's
centre in the direction of its north, east, south, or west neighbour,
respectively. No character will appear in the string more than once.
</ul>
<p>
It is guaranteed that it is possible to move your playing piece
from
(<i>i<sub>1</sub></i>, <i>j<sub>1</sub></i>)
to
(<i>i<sub>2</sub></i>, <i>j<sub>2</sub></i>).
<p>
Input is terminated by a line containing <tt>0 0</tt>. These zeros
are not a test case and should not be processed.

<h3>Sample Input</h3>

<pre>
4 2
1 1 4 1
E SW
x EW
NW ES
N x
0 0
</pre>

A diagram of the input:<br/>
<img src="p11685.png"/>

<h3>Output Specification</h3>
Output consists of exactly one line for each test case. The lines contains an integer:
the minimum
number of turns to move your playing piece from
(<i>i<sub>1</sub></i>, <i>j<sub>1</sub></i>)
to
(<i>i<sub>2</sub></i>, <i>j<sub>2</sub></i>).

<h3>Output for Sample Input</h3>

<pre>
5
</pre>

An example optimal solution is:
<ol>
<li> Rotate (2,2) clockwise. Step to (1,2).
<li> Rotate (3,2) counterclockwise. Step to (2,2).
<li> Rotate (3,2) counterclockwise. Step to (3,2).
<li> Rotate (3,1) clockwise. Step to (3,1).
<li> Rotate (3,1) clockwise. Step to (4,1).
</ol>

<hr>
<i>Malcolm Sharpe</i>
</html>
