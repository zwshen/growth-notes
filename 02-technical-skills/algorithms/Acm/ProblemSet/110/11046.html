
<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Numbers and operations</TITLE>
<META NAME="description" CONTENT="Numbers and operations">
<META NAME="keywords" CONTENT="htmlatex">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="htmlatex.css">

</HEAD>

<BODY LANG="EN" BGCOLOR=#FFFFFF>

<H1><BR CLEAR=ALL><CENTER><TABLE BGCOLOR=#0000ff><TR><TD><B><FONT SIZE=5 COLOR=#FFff00>&nbsp;<A NAME="SECTION0001000000000000000000">
Numbers and operations</A>&nbsp;</FONT></B></TABLE></CENTER>
</H1>

<P>
<DIV ALIGN="CENTER">
<!-- MATH
 $\epsfbox{p11046.eps}$
 -->
<IMG
 WIDTH="618" HEIGHT="463" ALIGN="BOTTOM" BORDER="0"
 SRC="p11046.jpg"
 ALT="\epsfbox{p11046.eps}">
</DIV>

<P>
We want to solve the classical problem of obtaining a given <EM>target</EM> number
starting from a set of initial numbers according to the following
rules:

<P>

<UL>
<LI>All numbers involved in the problem are positive integers,
and so must be any intermediate result obtained for any
operation. Thus, operations that lead to non integer or
non positive numbers are strictly forbidden (we shall not
consider <EM>truncation</EM> or <EM>rounding</EM> results,
nor anything else like that).
</LI>
<LI>We can do any of the four elemental arithmetical operations:
addition, multiplication, subtraction, and division.
</LI>
<LI>Each number may be used once at most: when we take two numbers
and operate them, these numbers may not be used again in
further operations (but the result of this operation may,
and same considerations apply to this new number).
</LI>
<LI>There is no obligation to make use of all of the initial
numbers.
</LI>
</UL>

<P>
We shall make the following assumptions on the input data:

<P>

<UL>
<LI>For any target number <SPAN CLASS="MATH"><I>T</I></SPAN>, it will always hold that: <!-- MATH
 $0 < T < 2000$
 -->
<SPAN CLASS="MATH">0 &lt; <I>T</I> &lt; 2000</SPAN>.
</LI>
<LI>For any initial number <SPAN CLASS="MATH"><I>I</I></SPAN>, it will always hold that: <!-- MATH
 $0 < I < 200$
 -->
<SPAN CLASS="MATH">0 &lt; <I>I</I> &lt; 200</SPAN>.
</LI>
<LI>There will always be at least two initial numbers and seven at most.
</LI>
<LI>We shall not consider trivial problem cases, i.e. cases in which the target number is already contained in the initial ones.
</LI>
</UL>

<P>
In order to make unique the solution
provided by the program, we shall also make the following
assumptions on the solution that we will consider as correct:

<P>
The program should provide the solution that
reaches the target in the minimum number of operations. If there
is more than one solution with the minimum number of operations,
we will decide which one to take according to the characteristics
of the first operation in which they differ. The next rules will
apply.

<P>

<UL>
<LI>For two operations that are actually the same one, it will be preferred the one whose left-side operand is greater than, or equal to, the right-side operand. For example, operation ``<!-- MATH
 $10 \times 5=50$
 -->
<SPAN CLASS="MATH">10 <TT>x</TT> 5 = 50</SPAN>" will take priority over ``<!-- MATH
 $5 \times 10 = 50$
 -->
<SPAN CLASS="MATH">5 <TT>x</TT> 10 = 50</SPAN>".
</LI>
<LI>For operations involving two different operators, it will be preferred the one whose operator has the highest precedence, defined as follows:

<UL>
<LI>Addition (highest)
</LI>
<LI>Multiplication
</LI>
<LI>Subtraction
</LI>
<LI>Division (lowest)
</LI>
</UL>
</LI>
<LI>For operations with the same operator, it will be preferred the one involving the number whose position is lower in
the order in which they were given in the input (it appears first). If this first number may appear in two different operations of same precedence, same criterion should be applied for the second operand. New numbers generated by operations are assumed to be placed at the beginning of this ordered list.
</LI>
</UL>

<P>

<H2><FONT size=4 COLOR=#ff0000><A NAME="SECTION0001001000000000000000">
Input</A>&nbsp;</FONT>
</H2>

<P>
The input consists of a set of lines. Each line represents a test case, and it will be given in the
following format:

<P>
<P><!-- MATH
 \begin{displaymath}
T N I_{1} \ldots I_{N}
\end{displaymath}
 -->
</P>
<DIV ALIGN="CENTER" CLASS="mathdisplay">
<I>TNI</I><SUB>1</SUB>...<I>I</I><SUB>N</SUB>
</DIV><P></P>
<SPAN CLASS="MATH"><I>T</I></SPAN> is the target number, <SPAN CLASS="MATH"><I>N</I></SPAN> is the number of initial numbers, and <!-- MATH
 $I_{1} \ldots I_{N}$
 -->
<SPAN CLASS="MATH"><I>I</I><SUB>1</SUB>...<I>I</I><SUB>N</SUB></SPAN> are the initial numbers themselves. All numbers are separated by a single blank space. There will be no trailing/leading blank spaces at
the beginning/end of any input line. A final line with a single zero marks the end of the input. This last line must not be processed.

<P>

<H2><FONT size=4 COLOR=#ff0000><A NAME="SECTION0001002000000000000000">
Output</A>&nbsp;</FONT>
</H2>

<P>
For each input case (input line), the program should produce a line with the message:

<P>

<P>
<BR>

<TT>No solution</TT>

<P>

<P>
<BR>
if the target number cannot be obtained
from the initial numbers, or a set of lines with the sequence of
operations that leads from the initial numbers to the target,
taking into consideration the previous criteria. Each operation
must be expressed in the following format:

<P>

<P>
<BR>

<TT><!-- MATH
 $left\_operand$
 -->
<SPAN CLASS="MATH"><I>left</I><IMG
 WIDTH="73" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="11046img2.png"
 ALT="$ \_operand$"></SPAN> <SPAN CLASS="MATH"><I>operator</I></SPAN> <!-- MATH
 $right\_operand$
 -->
<SPAN CLASS="MATH"><I>right</I><IMG
 WIDTH="73" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="11046img2.png"
 ALT="$ \_operand$"></SPAN> = <SPAN CLASS="MATH"><I>result</I></SPAN></TT>

<P>

<P>
<BR>
where <!-- MATH
 $left\_operand$
 -->
<SPAN CLASS="MATH"><I>left</I><IMG
 WIDTH="73" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="11046img2.png"
 ALT="$ \_operand$"></SPAN> and <!-- MATH
 $right\_operand$
 -->
<SPAN CLASS="MATH"><I>right</I><IMG
 WIDTH="73" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="11046img2.png"
 ALT="$ \_operand$"></SPAN>
represent the numbers involved in the operation, <SPAN CLASS="MATH"><I>result</I></SPAN>
is the result of the operation, and <SPAN CLASS="MATH"><I>operator</I></SPAN> is a single
character that represents the operation carried out, and it must
be taken from the following ones:

<P>

<P>
<BR>

'<TT>+</TT>' : addition
<BR>
'<TT>x</TT>' : multiplication
<BR>
'<TT>-</TT>' : subtraction
<BR>
'<TT>/</TT>' : division

<P>

<P>
<BR>
For each input case, the last line of its
solution must end with a `<TT>&lt;-</TT>'
symbol, indicating that this is the last operation that gives the
target number as result. In all cases, there must be one blank
space (and only one) between each printed item and the following
one. There should be no leading/trading blank spaces at the
beginning/end of any output line. Each line must end with an <EM>end
of line</EM> mark, and there should appear no blank lines at the
output.

<P>

<H2><FONT size=4 COLOR=#ff0000><A NAME="SECTION0001003000000000000000">
Sample Input</A>&nbsp;</FONT>
</H2>

<P>
<PRE> 
811 6 7 15 19 25 2 3
911 6 1 2 3 4 5 6
1897 7 33 2 11 25 7 17 13
911 7 7 11 23 27 17 7 2
0
</PRE>

<P>

<H2><FONT size=4 COLOR=#ff0000><A NAME="SECTION0001004000000000000000">
Sample Output</A>&nbsp;</FONT>
</H2>

<P>
<PRE> 
15 + 7 = 22
22 x 19 = 418
418 x 2 = 836
836 - 25 = 811
</PRE>

<P>


<P>
<BR><HR>

</BODY>
</HTML>
</HTML>
