<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>


	<title>Problem D: Slitherlink</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head><body>

<h2>Problem D: Slitherlink</h2>

<font color="white"><img src="p11745.png" width="400" align="right" border="5"></font>
<p>The puzzle game Slitherlink is played on a grid.  Each cell of the grid contains either a space or an integer from 0 to 3.
The goal is to draw in some grid lines connecting vertically or horizonally adjacent points on the grid
subject to the following constraints:
</p><ol><li>If a grid cell is numbered k then exactly k out of the 4 adjacent grid lines are drawn.
</li><li>The grid lines form a single loop that does not cross itself.
</li></ol><p>Determining if a given instance of a Slitherlink puzzle
can be completed or not is NP-complete which means nobody knows of an
efficient algorithm to solve the problem for large grids. Your task is
simpler. Given an instance of a Slitherlink puzzle and a proposed
solution, you are to check that the solution indeed satisfies the
constraints for that puzzle.
</p>
<p>For example, the first sample input is not valid since there are 2 grid lines drawn adjacent to a cell numbered 1.
The second, third, and fourth samples are invalid since the grid lines do not form a single loop.
However, the fifth sample is valid.
</p>
<h3>Input Format</h3>
<p>The first integer denotes the number of test cases to follow.  Each test case is specified by a 
line containing two positive integers R and C (both at most 50) followed by a grid of 2R+1 rows of 2C+1 characters.
The contents of row r and column c (counting from 1) are as follows:
</p><ol><li>if both r and c are odd then the character is a '+' indicating a grid point
</li><li>if both r and c are even then the character is either a space
or one of 0, 1, 2, or 3 indicating the contents of the corresponding
grid space
</li><li>if r is odd and c is even then the character is either a space or - indicating a drawn horizontal grid line
</li><li>if r is even and c is odd then the character is either a space or | indicating a drawn vertical grid line
</li></ol><p>You can assume all inputs are well-formed descriptions of a Slitherlink puzzle and a proposed solution.
A blank line also precedes each test case.
</p>
<h3>Output Format</h3>
<p>The output for each test case is a single line containing either <code>Valid</code> or <code>Invalid</code>, depending on whether the proposed
solution is valid or not.
</p>
<h3>Sample Input</h3>
<pre>5

3 3
+ +-+ +
 1| |2 
+-+ +-+
|  1  |
+-+-+ +
 1  |3|
+ + +-+

2 3
+-+ +-+
|3| |3|
+ + + +
|3| |3|
+-+ +-+

2 2
+-+-+
|3|3|
+ + +
|3|3|
+-+-+

2 2
+ +-+
 2| |
+-+-+
| |2 
+-+ +

3 4
+ +-+-+ +
  |   |2 
+-+ + +-+
|3 0   3|
+-+ +-+-+
  | |  1 
+ +-+ + +
</pre>
<h3>Sample Output</h3>
<pre>Invalid
Invalid
Invalid
Invalid
Valid
</pre>
<hr>
<em>Zachary Friggstad</em>

</body></html>
