<html>
	<head>
		<TITLE>MIUP'2004: Problem I</TITLE> 
		<!-- ZoneLabs Privacy Insertion -->
		<script language='javascript' src='http://127.0.0.1:1026/js.cgi?pcaw&amp;r=6334'></script>
	</head>
	<body>
		<FONT color="#006000">
			<H1>Problem I</H1>
		</FONT><FONT color="#006000">
			<H1 align="center">Eternal Truths</H1>
		</FONT>
		<p align="center"><img border="0" src="p928b.gif" width="137" height="145">
		&nbsp;
		<p align="left">
		History is filled with legends and stories associated with mazes and labyrinths 
		that have been shrouded by mystery.&nbsp;
		<p>
		In some ancient religion a maze functioned as a cult center and symbolized 
		mankind's search for all eternal truths.<p>In their initiation cult young people 
			have to pass across a maze composed by squared chambers that can communicate 
			with the ones at the north, south, east or west. They have to go from a start 
			point to an end point passing by the shortest number of chambers and have to 
			follow some ritual. They have to respect a sequence of 3 moves that will be 
			repeated until the end point is reached. In the first move they pass through 
			one chamber, in the second through two chambers and in the third through three 
			chambers. In each of these moves they can’t change their direction. <FONT color="#006000">
				<H2>Problem</H2>
			</FONT>
			<table border="0" cellpadding="0" cellspacing="0" width="100%">
				<tr>
					<td>
						Given a map of the chambers disposed in a rectangular grid find the shortest 
						path, in number of moves, from a start point to an end point.<p>Notice that, in the 
							sequence of moves the ritual described above must be respected. In each move 
							you must pass through the corresponding number of chambers, without changing 
							your direction during a move. You must begin with 1 chamber and repeat the 
							sequence of 1, 2 and 3 chambers until the end is reached. The end can be 
							reached in any of the states.</p>
					</td>
					<td>
						<p><FONT color="#006000"><img border="0" src="p928a.gif" width="140" height="140"> </FONT>
						</p>
					</td>
				</tr>
			</table>
			<FONT color="#006000">
				<H2>Input</H2>
			</FONT>
		<p>
		The first line contains the number of test cases.<p>The first line of each test 
			case contains two integers separated by a single space: <i>R</i> (2&lt;= <i>R</i>&lt;= 
			300) corresponding to the number of rows and <i>C</i> (2 &lt;= <i>C</i>
		&lt;= 300) corresponding to the number of columns.
		<P>
			Each of the following <i>R</i> lines contains <i>C</i> characters. For each 
			character, a dot&nbsp; "<b>.</b>"&nbsp; represents a chamber, a hash mark "<b>#</b>" 
			represents a wall and the capital letters "<b>S</b>" and "<b>E</b>"&nbsp; 
			represent the start and the end position respectively. <FONT color="#006000">
				<H2>Output</H2>
			</FONT>
		<p>
			The output consists of one line for each test case containing the number of 
			moves from "<b>S</b>" to "<b>E</b>" or the word "NO" if there is no solution. <FONT color="#006000">
				<H2>Sample Input</H2>
			</FONT>
			<PRE>2
5 4
S...
.#.#
.#..
.##.
...E
6 6 
.S...E
.#.##.
.#....
.#.##.
.####.
......</PRE>
			<FONT color="#006000">
				<H2>Sample Output</H2>
			</FONT>
			<PRE>NO
3
</PRE>
			<HR size="2">
			<center><font size="4">MIUP’2004: Fourth Portuguese National Programming Contest</font></center>
		<P>
			<HR size="2">
			<!-- ZoneLabs Popup Blocking Insertion -->
			<script language='javascript'>postamble();</script>
			Problem setter: Ana Paula Maldonado</P>
	</body>
</html>
